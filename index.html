<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’Œ</title>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;1,400;1,600&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Crimson Pro', Georgia, serif;
  background: #fdf6f0;
  color: #3a2a2a;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.screen {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  transition: opacity 0.6s ease;
}
.screen.hidden {
  opacity: 0;
  pointer-events: none;
}

/* ASK SCREEN */
#ask-screen { gap: 2.5rem; text-align: center; padding: 2rem; }

.question {
  font-size: clamp(1.8rem, 5vw, 2.8rem);
  font-style: italic;
}

.heart { font-size: 2rem; }

.buttons { display: flex; gap: 1.2rem; }

.btn {
  padding: 0.7rem 2rem;
  border-radius: 4px;
  font-family: 'Crimson Pro', Georgia, serif;
  font-size: 1.15rem;
  cursor: pointer;
  border: none;
}

.btn-yes { background: #c0392b; color: #fff; }

.btn-no {
  background: transparent;
  color: #999;
  border: 1px solid #ddd;
  transition: transform 0.35s ease, opacity 0.35s ease;
}

/* SLIDES */
.slide {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 1rem;
  opacity: 0;
  transition: opacity 0.8s ease;
}
.slide.active { opacity: 1; }

.slide img,
.slide video {
  max-width: min(75vw, 420px);
  max-height: min(60vh, 420px);
  border-radius: 4px;
  object-fit: cover;
}

.slide-caption {
  font-style: italic;
  color: #9a7a6a;
}

.dots {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 0.5rem;
}
.dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: #ddd;
  cursor: pointer;
}
.dot.active { background: #c0392b; }

.nav-arrow {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 2rem;
  color: #ccc;
  cursor: pointer;
  transition: color 0.2s;
}
.nav-arrow:hover { color: #999; }
.nav-prev { left: 1rem; }
.nav-next { right: 1rem; }

.nav-next.swipe-label {
  font-size: 1rem;
  color: #c0392b;
  font-style: italic;
}

#final-screen { text-align: center; }

.final-msg {
  font-size: clamp(1.8rem, 5vw, 3rem);
  font-style: italic;
}

.final-small {
  color: #c0392b;
  font-style: italic;
  font-size: 1.2rem;
}
</style>
</head>
<body>

<!-- ASK -->
<div class="screen" id="ask-screen">
  <span class="heart">â™¡</span>
  <p class="question">Will you be my Valentine?</p>
  <div class="buttons">
    <button class="btn btn-yes" onclick="sayYes()">Yes</button>
    <button class="btn btn-no" id="noBtn" onclick="pressNo()">No</button>
  </div>
</div>

<!-- SLIDESHOW -->
<div class="screen hidden" id="slideshow-screen">

  <div class="slide active" id="slide-0">
    <img src="IMG1.JPG">
    <span class="slide-caption">our first memory</span>
  </div>

  <div class="slide" id="slide-1">
    <img src="IMG2.JPG">
    <span class="slide-caption">every moment with you</span>
  </div>

  <div class="slide" id="slide-2">
    <img src="IMG3.JPG">
    <span class="slide-caption">late nights & laughter</span>
  </div>

  <div class="slide" id="slide-3">
    <img src="IMG4.JPG">
    <span class="slide-caption">adventures together</span>
  </div>

  <div class="slide" id="slide-4">
    <video autoplay muted loop playsinline>
      <source src="VID.MP4" type="video/mp4">
    </video>
    <span class="slide-caption">my favourite person</span>
  </div>

  <button class="nav-arrow nav-prev" onclick="changeSlide(-1)">â€¹</button>
  <button class="nav-arrow nav-next" id="nextArrow" onclick="changeSlide(1)">â€º</button>
  <div class="dots" id="dots"></div>
</div>

<!-- FINAL -->
<div class="screen hidden" id="final-screen">
  <span class="heart" style="font-size:2.5rem">â™¡</span>
  <p class="final-msg">happy valentine's day<br>my love</p>
  <p class="final-small">always yours</p>
</div>

<script>
let noClicks = 0;
const noBtn = document.getElementById('noBtn');
const noScales = [0.65, 0.38, 0.15, 0];

function pressNo() {
  noClicks++;
  const s = noScales[noClicks - 1];
  noBtn.style.transform = `scale(${s})`;
  if (s === 0) {
    noBtn.style.opacity = '0';
    noBtn.style.pointerEvents = 'none';
  }
}

const totalSlides = document.querySelectorAll('.slide').length;
let current = 0;
let timer;

function buildDots() {
  const el = document.getElementById('dots');
  for (let i = 0; i < totalSlides; i++) {
    const d = document.createElement('div');
    d.className = 'dot' + (i === 0 ? ' active' : '');
    d.onclick = () => {
      clearInterval(timer);
      goTo(i);
      if (i !== 4) startAuto();
    };
    el.appendChild(d);
  }
}

function goTo(idx) {
  document.getElementById('slide-' + current).classList.remove('active');
  document.querySelectorAll('.dot')[current]?.classList.remove('active');

  current = idx;

  if (current >= totalSlides) { showFinal(); return; }

  document.getElementById('slide-' + current).classList.add('active');
  document.querySelectorAll('.dot')[current]?.classList.add('active');

  const nextArrow = document.getElementById('nextArrow');

  if (current === 4) {
    nextArrow.textContent = 'swipe â†’';
    nextArrow.classList.add('swipe-label');
    clearInterval(timer); // STOP auto on video
  } else {
    nextArrow.textContent = 'â€º';
    nextArrow.classList.remove('swipe-label');
  }
}

function changeSlide(dir) {
  clearInterval(timer);
  const next = current + dir;
  if (next < 0) return;
  goTo(next);
  if (current !== 4) startAuto();
}

function startAuto() {
  clearInterval(timer);
  timer = setInterval(() => goTo(current + 1), 4000);
}

function showFinal() {
  clearInterval(timer);
  document.getElementById('slideshow-screen').classList.add('hidden');
  document.getElementById('final-screen').classList.remove('hidden');
}

function sayYes() {
  document.getElementById('ask-screen').classList.add('hidden');
  document.getElementById('slideshow-screen').classList.remove('hidden');
  buildDots();
  startAuto();
}
</script>

</body>
</html>
